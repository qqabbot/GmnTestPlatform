import{p}from"./project-b5d312e0.js";import{a as $,r as m,q as L,b as r,B as M,o as w,f as U,d as t,w as o,E as i,g as P,e as u,G as q,c as z,H as I}from"./index-8b1ce721.js";import"./request-c7ccb34d.js";const G={class:"project-list"},H={class:"card-header"},S={__name:"ProjectList",setup(T){const _=m(!1),s=m(!1),f=m([]),l=m({projectName:"",description:""}),v=async()=>{_.value=!0;try{f.value=await p.getAll()}catch{i.error("Failed to load projects")}finally{_.value=!1}},b=n=>{l.value={...n},s.value=!0},g=async()=>{try{l.value.id?(await p.update(l.value.id,l.value),i.success("Project updated")):(await p.create(l.value),i.success("Project created")),s.value=!1,v()}catch{i.error("Failed to save project")}},x=async n=>{try{await I.confirm("Are you sure to delete this project?","Warning",{type:"warning"}),await p.delete(n),i.success("Project deleted"),v()}catch(e){e!=="cancel"&&i.error("Failed to delete project")}},C=()=>{l.value={projectName:"",description:""}};return L(()=>{v()}),(n,e)=>{const N=r("Plus"),V=r("el-icon"),d=r("el-button"),c=r("el-table-column"),k=r("el-table"),D=r("el-card"),j=r("el-input"),y=r("el-form-item"),A=r("el-form"),B=r("el-dialog"),E=M("loading");return w(),U("div",G,[t(D,{class:"box-card"},{header:o(()=>[P("div",H,[e[6]||(e[6]=P("span",null,"Projects",-1)),t(d,{type:"primary",onClick:e[0]||(e[0]=a=>s.value=!0)},{default:o(()=>[t(V,null,{default:o(()=>[t(N)]),_:1}),e[5]||(e[5]=u(" New Project ",-1))]),_:1})])]),default:o(()=>[q((w(),z(k,{data:f.value,style:{width:"100%"}},{default:o(()=>[t(c,{prop:"id",label:"ID",width:"80"}),t(c,{prop:"projectName",label:"Project Name","min-width":"200"}),t(c,{prop:"description",label:"Description","min-width":"300"}),t(c,{prop:"createdAt",label:"Created At",width:"180"}),t(c,{label:"Actions",width:"200",fixed:"right"},{default:o(({row:a})=>[t(d,{type:"primary",size:"small",text:"",onClick:F=>b(a)},{default:o(()=>[...e[7]||(e[7]=[u(" Edit ",-1)])]),_:1},8,["onClick"]),t(d,{type:"danger",size:"small",text:"",onClick:F=>x(a.id)},{default:o(()=>[...e[8]||(e[8]=[u(" Delete ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,_.value]])]),_:1}),t(B,{modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value=a),title:l.value.id?"Edit Project":"New Project",width:"500px",onClose:C},{footer:o(()=>[t(d,{onClick:e[3]||(e[3]=a=>s.value=!1)},{default:o(()=>[...e[9]||(e[9]=[u("Cancel",-1)])]),_:1}),t(d,{type:"primary",onClick:g},{default:o(()=>[...e[10]||(e[10]=[u("Save",-1)])]),_:1})]),default:o(()=>[t(A,{model:l.value,"label-width":"100px"},{default:o(()=>[t(y,{label:"Name",required:""},{default:o(()=>[t(j,{modelValue:l.value.projectName,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.projectName=a)},null,8,["modelValue"])]),_:1}),t(y,{label:"Description"},{default:o(()=>[t(j,{modelValue:l.value.description,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.description=a),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},O=$(S,[["__scopeId","data-v-e9a6aa62"]]);export{O as default};
