import{s as f,V as I,M as T}from"./VariableInput-3115177e.js";import{a as O,r as c,b8 as P,q as F,b as n,B as R,o as w,f as $,g as b,d as l,w as t,G as H,c as q,E as p,D as W,b_ as z,e as s,t as J,H as K}from"./index-8b1ce721.js";import"./request-c7ccb34d.js";import"./environment-a944f101.js";import"./MonacoEditor.vue_vue_type_style_index_0_scoped_fcb97235_lang-9aa76e92.js";const Q={class:"step-template-list"},X={class:"header-actions"},Y={class:"dialog-footer"},Z={__name:"StepTemplateList",setup(ee){const E=c([]),v=c(!1),d=c(!1),m=c(!1),o=P({id:null,name:"",method:"GET",url:"",headers:"{}",body:"",assertionScript:"",projectId:null}),g=async()=>{v.value=!0;try{E.value=await f.getAll()}catch{p.error("Failed to load templates")}finally{v.value=!1}},x=()=>{m.value=!1,Object.assign(o,{id:null,name:"",method:"GET",url:"",headers:"{}",body:"",assertionScript:""}),d.value=!0},S=i=>{m.value=!0,Object.assign(o,i),d.value=!0},C=i=>{K.confirm("Are you sure you want to delete this template?","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{try{await f.delete(i.id),p.success("Deleted successfully"),g()}catch{p.error("Failed to delete")}})},k=async()=>{try{m.value?await f.update(o.id,o):await f.create(o),p.success("Saved successfully"),d.value=!1,g()}catch{p.error("Failed to save")}};return F(()=>{g()}),(i,e)=>{const D=n("el-icon"),u=n("el-button"),r=n("el-table-column"),U=n("el-tag"),L=n("el-table"),B=n("el-input"),y=n("el-form-item"),_=n("el-radio"),h=n("el-radio-group"),V=n("el-tab-pane"),G=n("el-tabs"),M=n("el-form"),N=n("el-dialog"),j=R("loading");return w(),$("div",Q,[b("div",X,[e[9]||(e[9]=b("h2",null,"Step Library",-1)),l(u,{type:"primary",onClick:x},{default:t(()=>[l(D,null,{default:t(()=>[l(W(z))]),_:1}),e[8]||(e[8]=s(" New Template ",-1))]),_:1})]),H((w(),q(L,{data:E.value,style:{width:"100%"}},{default:t(()=>[l(r,{prop:"id",label:"ID",width:"60"}),l(r,{prop:"name",label:"Name"}),l(r,{prop:"method",label:"Method",width:"100"},{default:t(({row:a})=>[l(U,{type:a.method==="GET"?"success":"primary"},{default:t(()=>[s(J(a.method),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"url",label:"URL","show-overflow-tooltip":""}),l(r,{label:"Actions",width:"180"},{default:t(({row:a})=>[l(u,{link:"",type:"primary",onClick:A=>S(a)},{default:t(()=>[...e[10]||(e[10]=[s("Edit",-1)])]),_:1},8,["onClick"]),l(u,{link:"",type:"danger",onClick:A=>C(a)},{default:t(()=>[...e[11]||(e[11]=[s("Delete",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,v.value]]),l(N,{modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=a=>d.value=a),title:m.value?"Edit Template":"New Template",width:"60%"},{footer:t(()=>[b("span",Y,[l(u,{onClick:e[6]||(e[6]=a=>d.value=!1)},{default:t(()=>[...e[17]||(e[17]=[s("Cancel",-1)])]),_:1}),l(u,{type:"primary",onClick:k},{default:t(()=>[...e[18]||(e[18]=[s("Save",-1)])]),_:1})])]),default:t(()=>[l(M,{model:o,"label-width":"100px"},{default:t(()=>[l(y,{label:"Name"},{default:t(()=>[l(B,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.name=a),placeholder:"e.g. Login Step"},null,8,["modelValue"])]),_:1}),l(y,{label:"Method"},{default:t(()=>[l(h,{modelValue:o.method,"onUpdate:modelValue":e[1]||(e[1]=a=>o.method=a)},{default:t(()=>[l(_,{label:"GET"},{default:t(()=>[...e[12]||(e[12]=[s("GET",-1)])]),_:1}),l(_,{label:"POST"},{default:t(()=>[...e[13]||(e[13]=[s("POST",-1)])]),_:1}),l(_,{label:"PUT"},{default:t(()=>[...e[14]||(e[14]=[s("PUT",-1)])]),_:1}),l(_,{label:"DELETE"},{default:t(()=>[...e[15]||(e[15]=[s("DELETE",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(y,{label:"URL"},{default:t(()=>[l(I,{modelValue:o.url,"onUpdate:modelValue":e[2]||(e[2]=a=>o.url=a),placeholder:"URL"},null,8,["modelValue"])]),_:1}),l(G,null,{default:t(()=>[l(V,{label:"Body"},{default:t(()=>[l(T,{modelValue:o.body,"onUpdate:modelValue":e[3]||(e[3]=a=>o.body=a),language:"json",height:"200px"},null,8,["modelValue"])]),_:1}),l(V,{label:"Headers"},{default:t(()=>[l(T,{modelValue:o.headers,"onUpdate:modelValue":e[4]||(e[4]=a=>o.headers=a),language:"json",height:"200px"},null,8,["modelValue"])]),_:1}),l(V,{label:"Combined Script"},{default:t(()=>[l(T,{modelValue:o.assertionScript,"onUpdate:modelValue":e[5]||(e[5]=a=>o.assertionScript=a),language:"groovy",height:"200px"},null,8,["modelValue"]),e[16]||(e[16]=b("div",{class:"help-text"},"Contains assertions and extractors logic (Groovy)",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},se=O(Z,[["__scopeId","data-v-540eadab"]]);export{se as default};
